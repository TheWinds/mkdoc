# MKDOC
> çµæ´»å¯å®šåˆ¶,å¤šè¯­è¨€æ”¯æŒçš„APIæ–‡æ¡£ç”Ÿæˆå™¨

## å¿«é€Ÿå¼€å§‹

- ä½¿ç”¨ (Command)
```shell
GO111MODULE=on go get github.com/thewinds/mkdoc/cmd/mkdoc
```

```bash
cd /path/to/your/projet
# åˆå§‹åŒ–
mkdoc init
# ä¿®æ”¹é…ç½®
vim conf.yaml
# ä»£ç æ³¨è§£
# ...
# ç”Ÿæˆæ–‡æ¡£
mkdoc make
```

- ä½¿ç”¨ (DocServer)
```shell script
# 1.pull
docker pull thewinds/mkdoc-server
# 2.set Environments and Config file
# 3.run
# you will see:
# 2020/05/16 18:48:47 server docs:
# 2020/05/16 18:48:47     index   =>      127.0.0.1:8080
# 2020/05/16 18:48:47     project_0 =>      127.0.0.1:8080/project_0
# 2020/05/16 18:48:47     project_1  =>      127.0.0.1:8080/project_1
# 2020/05/16 18:48:47 notify url: 127.0.0.1:8080/notify
```

> web listen port is `:8080`
>
> notify url is `:8080/notify`

### ç¯å¢ƒå˜é‡

| åç§°| æè¿° |
| --- | --- |
|GIT_USER_NAME|user name for private git repository |
|GIT_PASSWORD|password for private git repository|
|NOTIFY_TOKEN|token for notify docserver|
|WEB_USER_NAME|basic auth username|
|WEB_PASSWORD|basic auth password|
|DEBUG|DEBUG=1 open debug mode|

> if `WEB_USER_NAME` is not empty basic auth will be open

### é…ç½®æ–‡ä»¶
config file must named as `conf.yaml`

this file contains multi section.

the first section is `docserver` config,other sections are mkdoc project config ,those config's format as the same as `mkdoc` config.

- docserver section

| åç§°| æè¿° |
| --- | --- |
|repo| repository to clone|
|branch| branch to clone|

- projects section

| name| description |
| --- | --- |
|id|path for doc page|

for example:
```yaml
repo: "https://github.com/TheWinds/mkdoc.git"
branch: develop
---
id: project_1
name: mkdoc example1
desc: this doc is auto generated by [mkdoc](https://github.com/TheWinds/mkdoc)
api_base_url: "http://localhost:8080"
mime:
  in:  form
  out: json
scanner:
  - gofunc
generator:
  - docsify
args:
  enable_go_mod: true
  path: "./src"
---
id: project_2
name: mkdoc example2
desc: this doc is auto generated by [mkdoc](https://github.com/TheWinds/mkdoc)
api_base_url: "http://localhost:8080"
mime:
  in:  form
  out: json
inject:
  - name: "token"
    desc: "jwt token"
    default: "hfjdjhkklashjkfsd.hjkfsdajhkfdsj.jknsfdksf"
    scope: header
scanner:
  - gofunc
  - docdef
generator:
  - markdown
  - insomnia
  - docsify
args:
  enable_go_mod: true
  path: "./src"
```  


## ä¾‹å­
å‚è€ƒ[examples](https://github.com/TheWinds/mkdoc/tree/master/_examples)ç›®å½•ä¸‹çš„ä¾‹å­

## æ–‡æ¡£
[ğŸ‘‰ Wiki](https://github.com/TheWinds/mkdoc/wiki)

## æ’ä»¶
æ’ä»¶åŒ…æ‹¬3ç§ç±»å‹*Scanner*ã€*Generator*ã€*ObjectLoader*,æ‚¨å¯ä»¥è‡ªå·±å®ç°è¿™3ç§æ’ä»¶æ¥é€‚åº”è‡ªå·±é¡¹ç›®ä¸­çš„ç”Ÿæˆéœ€æ±‚,
ä¸‹é¢æœ‰ä¸€äº›å·²ç»å®ç°çš„æ’ä»¶ã€‚
### Scanner

*Scanner*(æ‰«æå™¨)çš„ä½œç”¨æ˜¯ä»æºç ä¸­æ‰«ææ³¨è§£

å†…ç½®äº†ä»¥ä¸‹æ‰«æå™¨:

| åç§°    | è¯´æ˜                      | é“¾æ¥                                                         |
| ------- | ------------------------- | ------------------------------------------------------------ |
| *gofuc* | ä» golang func commentsä¸­æ‰«ææ–‡æ¡£ä¿¡æ¯ | [ğŸ›¸](https://github.com/TheWinds/mkdoc/tree/master/scanner/gofunc) |
| *docdef* | ä» doc schemaæ–‡ä»¶ä¸­æ‰«ææ–‡æ¡£ä¿¡æ¯ | [ğŸ›¸](https://github.com/TheWinds/mkdoc/tree/master/scanner/docdef) |



### Generator

*Generator*(æ–‡æ¡£ç”Ÿæˆå™¨)çš„ä½œç”¨æ˜¯æ ¹æ®apiä¿¡æ¯ç”Ÿæˆ æ–‡æ¡£ || æµ‹è¯•

å†…ç½®äº†ä»¥ä¸‹ç”Ÿæˆå™¨:

| åç§°     | è¯´æ˜                                  | é“¾æ¥                                  |
| -------- | ------------------------------------- | --------------------------------------- |
| *docsify* | ç”Ÿæˆdocsifyæ‰€éœ€æ–‡æ¡£                | [ğŸ›¸](https://github.com/TheWinds/mkdoc/tree/master/generator/docsify) |
| *markdown* | ç”Ÿæˆmarkdownæ ¼å¼çš„æ–‡æ¡£                | [ğŸ›¸](https://github.com/TheWinds/mkdoc/tree/master/generator/markdown) |
| *insomnia* | ç”Ÿæˆå¯ä¾›insomniaå¯¼å…¥çš„æ•°æ®,å¯ç”¨äºæµ‹è¯• | [ğŸ›¸](https://github.com/TheWinds/mkdoc/tree/master/generator/insomnia) |

### ObjectLoader
*ObjectLoader*(ObjectåŠ è½½å™¨)çš„ä½œç”¨æ˜¯æ ¹æ®ç±»å‹å®šä½ä¿¡æ¯åŠ è½½Object

å†…ç½®äº†ä»¥ä¸‹Loader:

| åç§°     | è¯´æ˜                                  | é“¾æ¥                                  |
| -------- | ------------------------------------- | --------------------------------------- |
| *goloader* | golang sturct ç±»å‹åŠ è½½               | [ğŸ›¸](https://github.com/TheWinds/mkdoc/tree/master/objloader/goloader) |